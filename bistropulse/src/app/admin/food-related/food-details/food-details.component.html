<div id="container" class="container py-4">
  <div id="header" class="conatainer-fluid">
    <app-h1 text="Food Details" />

    <div class="btn-container">
      <div class="form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          [checked]="food.available"
        />
        <label class="form-check-label ms-2">{{
          food.available ? "Available" : "Unavailable"
        }}</label>
      </div>
      <app-button buttonText="Edit">
        <i class="fa-solid fa-pen"></i>
      </app-button>
    </div>
  </div>
  <div id="divider" class="row mx-auto">
    <!-- Left Section -->
    <div id="left-section" class="col-md-5">
      <img
        [src]="food.image_url || 'assets/food-images/pizza.png'"
        class="img-fluid rounded mb-3"
        alt="Beef Onion Pizza"
      />

      <h3 class="food-name">{{ food.name }}</h3>
      <p class="text-muted">
        <span><span class="text-warning">★</span> 5.0</span>
        (23 Reviews) • 23 Sales
      </p>

      <h5 class="food-details mt-3">Details</h5>
      <p id="p" class="text-muted">
        {{ food.description }}
      </p>

      <h5 id="h5" class="mt-4">Size</h5>
      <div
        id="form-check"
        class="form-check d-flex justify-content-between align-items-center"
      >
        <input
          class="form-check-input"
          type="radio"
          name="size"
          id="small"
          checked
        />
        <label class="form-check-label ms-2 me-auto" for="small">Small</label>
        <p class="mb-0">₵{{ food.price.small }}</p>
      </div>

      <!-- Medium -->
      <div
        id="form-check"
        class="form-check d-flex justify-content-between align-items-center"
      >
        <input class="form-check-input" type="radio" name="size" id="medium" />
        <label class="form-check-label ms-2 me-auto" for="medium">Medium</label>
        <p class="mb-0">₵{{ food.price.medium }}</p>
      </div>

      <!-- Large -->
      <div
        id="form-check"
        class="form-check d-flex justify-content-between align-items-center"
      >
        <input class="form-check-input" type="radio" name="size" id="large" />
        <label class="form-check-label ms-2 me-auto" for="large">Large</label>
        <p class="mb-0">₵{{ food.price.large }}</p>
      </div>
    </div>

    <!-- Right Section -->
    <div id="right-section" class="col-md-7">
      <div class="rating-range-container contianer-fluid">
        <div class="row">
          <!-- Left Column: Average + Total -->
          <div id="average-rating-container" class="col-md-5">
            <div id="ratings" class="d-flex flex-column">
              <h2>
                {{ averageRating.toFixed(1) }}
                <span class="text-muted fs-6">/5.0</span>
              </h2>
              <img
                [src]="`assets/ratings/rating-${averageRating}.png`"
                alt="Average Rating"
              />
              <h1 class="total-ratings">{{ totalRatings }} Ratings</h1>
            </div>
          </div>

          <!-- Right Column: Star Breakdown -->
          <div class="col-md-7">
            <div class="rating-breakdown mb-4">
              <div *ngFor="let item of ratingBreakdown">
                <div
                  class="d-flex align-items-baseline justify-content-center gap-2 flex-grow-1"
                >
                  <span>
                    <img
                      [src]="'assets/ratings/rating-' + item.stars + '.png'"
                      alt="rating"
                      style="margin-bottom: 5px"
                    />
                  </span>
                  <span class="progress w-100" style="height: 14px">
                    <span
                      class="progress-bar"
                      role="progressbar"
                      [style.width.%]="
                        totalRatings ? (item.count / totalRatings) * 100 : 0
                      "
                    ></span>
                  </span>
                  <span>{{ item.count }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Ratings Section -->
      <div id="ratings-and-reviews">
        <h5 class="fw-bold mb-3">Review & Ratings</h5>
      </div>
      <!-- Scrollable Reviews Container -->
      <div style="max-height: 300px; overflow-y: auto">
        <div
          class="review-card d-flex mb-3"
          *ngFor="let review of food.reviews"
        >
          <img
            src="assets/images/avatar.png"
            alt="Reviewer"
            class="rounded-circle me-3"
            width="50"
            height="50"
          />
          <div>
            <h6 class="mb-1 fw-semibold">
              {{ review.name }}
              <span class="text-warning">★ {{ review.rating.toFixed(1) }}</span>
            </h6>
            <p class="text-muted mb-1">{{ review.comment }}</p>
            <small class="text-muted">{{ review.date }}</small>
          </div>
        </div>
      </div>

      <!-- Review Cards -->

      <!-- Clone the above div for more reviews -->
    </div>
  </div>
</div>
